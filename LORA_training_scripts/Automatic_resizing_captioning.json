{"id":"cf36eccf-f63d-41c7-93b1-0f289a888ff9","revision":0,"last_node_id":65,"last_link_id":80,"nodes":[{"id":13,"type":"JC_ExtraOptions","pos":[880,460],"size":[400,736],"flags":{},"order":14,"mode":0,"inputs":[{"localized_name":"exclude_people_info","name":"exclude_people_info","type":"BOOLEAN","widget":{"name":"exclude_people_info"},"link":null},{"localized_name":"include_lighting","name":"include_lighting","type":"BOOLEAN","widget":{"name":"include_lighting"},"link":null},{"localized_name":"include_camera_angle","name":"include_camera_angle","type":"BOOLEAN","widget":{"name":"include_camera_angle"},"link":null},{"localized_name":"include_watermark","name":"include_watermark","type":"BOOLEAN","widget":{"name":"include_watermark"},"link":null},{"localized_name":"include_JPEG_artifacts","name":"include_JPEG_artifacts","type":"BOOLEAN","widget":{"name":"include_JPEG_artifacts"},"link":null},{"localized_name":"include_exif","name":"include_exif","type":"BOOLEAN","widget":{"name":"include_exif"},"link":null},{"localized_name":"exclude_sexual","name":"exclude_sexual","type":"BOOLEAN","widget":{"name":"exclude_sexual"},"link":null},{"localized_name":"exclude_image_resolution","name":"exclude_image_resolution","type":"BOOLEAN","widget":{"name":"exclude_image_resolution"},"link":null},{"localized_name":"include_aesthetic_quality","name":"include_aesthetic_quality","type":"BOOLEAN","widget":{"name":"include_aesthetic_quality"},"link":null},{"localized_name":"include_composition_style","name":"include_composition_style","type":"BOOLEAN","widget":{"name":"include_composition_style"},"link":null},{"localized_name":"exclude_text","name":"exclude_text","type":"BOOLEAN","widget":{"name":"exclude_text"},"link":null},{"localized_name":"specify_depth_field","name":"specify_depth_field","type":"BOOLEAN","widget":{"name":"specify_depth_field"},"link":null},{"localized_name":"specify_lighting_sources","name":"specify_lighting_sources","type":"BOOLEAN","widget":{"name":"specify_lighting_sources"},"link":null},{"localized_name":"do_not_use_ambiguous_language","name":"do_not_use_ambiguous_language","type":"BOOLEAN","widget":{"name":"do_not_use_ambiguous_language"},"link":null},{"localized_name":"include_nsfw","name":"include_nsfw","type":"BOOLEAN","widget":{"name":"include_nsfw"},"link":null},{"localized_name":"only_describe_most_important_elements","name":"only_describe_most_important_elements","type":"BOOLEAN","widget":{"name":"only_describe_most_important_elements"},"link":null},{"localized_name":"do_not_include_artist_name_or_title","name":"do_not_include_artist_name_or_title","type":"BOOLEAN","widget":{"name":"do_not_include_artist_name_or_title"},"link":null},{"localized_name":"identify_image_orientation","name":"identify_image_orientation","type":"BOOLEAN","widget":{"name":"identify_image_orientation"},"link":null},{"localized_name":"use_vulgar_slang_and_profanity","name":"use_vulgar_slang_and_profanity","type":"BOOLEAN","widget":{"name":"use_vulgar_slang_and_profanity"},"link":null},{"localized_name":"do_not_use_polite_euphemisms","name":"do_not_use_polite_euphemisms","type":"BOOLEAN","widget":{"name":"do_not_use_polite_euphemisms"},"link":null},{"localized_name":"include_character_age","name":"include_character_age","type":"BOOLEAN","widget":{"name":"include_character_age"},"link":null},{"localized_name":"include_camera_shot_type","name":"include_camera_shot_type","type":"BOOLEAN","widget":{"name":"include_camera_shot_type"},"link":null},{"localized_name":"exclude_mood_feeling","name":"exclude_mood_feeling","type":"BOOLEAN","widget":{"name":"exclude_mood_feeling"},"link":null},{"localized_name":"include_camera_vantage_height","name":"include_camera_vantage_height","type":"BOOLEAN","widget":{"name":"include_camera_vantage_height"},"link":null},{"localized_name":"mention_watermark","name":"mention_watermark","type":"BOOLEAN","widget":{"name":"mention_watermark"},"link":null},{"localized_name":"avoid_meta_descriptive_phrases","name":"avoid_meta_descriptive_phrases","type":"BOOLEAN","widget":{"name":"avoid_meta_descriptive_phrases"},"link":null},{"localized_name":"refer_character_name","name":"refer_character_name","type":"BOOLEAN","widget":{"name":"refer_character_name"},"link":null},{"localized_name":"character_name","name":"character_name","type":"STRING","widget":{"name":"character_name"},"link":80}],"outputs":[{"localized_name":"extra_options","name":"extra_options","type":"JOYCAPTION_EXTRA_OPTIONS","links":[15]}],"properties":{"cnr_id":"comfyui-joycaption","ver":"1.1.1","Node name for S&R":"JC_ExtraOptions"},"widgets_values":[false,false,false,false,false,false,false,true,true,false,true,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,true,"Ona_model"]},{"id":3,"type":"JC_adv","pos":[1330,300],"size":[400,380],"flags":{},"order":19,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":37},{"localized_name":"extra_options","name":"extra_options","shape":7,"type":"JOYCAPTION_EXTRA_OPTIONS","link":15},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"quantization","name":"quantization","type":"COMBO","widget":{"name":"quantization"},"link":null},{"localized_name":"prompt_style","name":"prompt_style","type":"COMBO","widget":{"name":"prompt_style"},"link":null},{"localized_name":"caption_length","name":"caption_length","type":"COMBO","widget":{"name":"caption_length"},"link":null},{"localized_name":"max_new_tokens","name":"max_new_tokens","type":"INT","widget":{"name":"max_new_tokens"},"link":null},{"localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"top_p","name":"top_p","type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"top_k","name":"top_k","type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"custom_prompt","name":"custom_prompt","type":"STRING","widget":{"name":"custom_prompt"},"link":null},{"localized_name":"memory_management","name":"memory_management","type":"COMBO","widget":{"name":"memory_management"},"link":null}],"outputs":[{"localized_name":"PROMPT","name":"PROMPT","type":"STRING","links":[]},{"localized_name":"STRING","name":"STRING","type":"STRING","links":[34,64]}],"properties":{"cnr_id":"comfyui-joycaption","ver":"1.1.1","Node name for S&R":"JC_adv","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["joycaption-beta-one","Maximum Savings (4-bit)","Descriptive","medium",512,0.6,0.9,0,"","Keep in Memory"]},{"id":38,"type":"StringConcatenate","pos":[990.955078125,-658.6561889648438],"size":[400,200],"flags":{"collapsed":true},"order":11,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":null},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":50},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[51]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"StringConcatenate"},"widgets_values":["/","",""]},{"id":40,"type":"StringConcatenate","pos":[992.955078125,-758.6561279296875],"size":[400,200],"flags":{"collapsed":true},"order":10,"mode":0,"inputs":[{"localized_name":"string_a","name":"string_a","type":"STRING","widget":{"name":"string_a"},"link":null},{"localized_name":"string_b","name":"string_b","type":"STRING","widget":{"name":"string_b"},"link":52},{"localized_name":"delimiter","name":"delimiter","type":"STRING","widget":{"name":"delimiter"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[53]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"StringConcatenate"},"widgets_values":["/","",""]},{"id":39,"type":"PrimitiveString","pos":[596.1554565429688,-791.8561401367188],"size":[369.1735534667969,58],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[52]}],"title":"(FULL) Input Path","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveString"},"widgets_values":["workspace/ComfyUI/input/red_head_lady_v1"]},{"id":41,"type":"SetNode","pos":[1149.3551025390625,-791.8561401367188],"size":[210,58],"flags":{},"order":16,"mode":0,"inputs":[{"name":"STRING","type":"STRING","link":53}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Input_folder","properties":{"previousName":"Input_folder"},"widgets_values":["Input_folder"],"color":"#232","bgcolor":"#353"},{"id":36,"type":"PrimitiveString","pos":[596.1554565429688,-688.6561889648438],"size":[369.1735534667969,58],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[50]}],"title":"(FULL) Output Path","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveString"},"widgets_values":["workspace/ComfyUI/input/Ona_model_resized_2"]},{"id":35,"type":"SetNode","pos":[1153.3551025390625,-689.4561767578125],"size":[210,60],"flags":{},"order":17,"mode":0,"inputs":[{"name":"STRING","type":"STRING","link":51}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Results_folder","properties":{"previousName":"Results_folder"},"widgets_values":["Results_folder"],"color":"#223","bgcolor":"#335"},{"id":59,"type":"SetNode","pos":[1156.5545654296875,-478.4637145996094],"size":[210,58],"flags":{},"order":15,"mode":0,"inputs":[{"name":"INT","type":"INT","link":72}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Number_images","properties":{"previousName":"Number_images"},"widgets_values":["Number_images"],"color":"#1b4669","bgcolor":"#29699c"},{"id":61,"type":"GetNode","pos":[650,330],"size":[210,60],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[{"name":"INT","type":"INT","links":[74]}],"title":"Get_Number_images","properties":{},"widgets_values":["Number_images"],"color":"#1b4669","bgcolor":"#29699c"},{"id":44,"type":"GetNode","pos":[650,200],"size":[210,60],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[55]}],"title":"Get_Input_folder","properties":{},"widgets_values":["Input_folder"],"color":"#232","bgcolor":"#353"},{"id":23,"type":"ImageListToImageBatch","pos":[1070,120],"size":[202.54061889648438,26],"flags":{},"order":18,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":26}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[27,69]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.22.0","Node name for S&R":"ImageListToImageBatch"},"widgets_values":[]},{"id":14,"type":"ImageResizeKJv2","pos":[1393.8719482421875,-144.1999969482422],"size":[270,336],"flags":{},"order":20,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":27},{"localized_name":"mask","name":"mask","shape":7,"type":"MASK","link":null},{"localized_name":"width","name":"width","type":"INT","widget":{"name":"width"},"link":null},{"localized_name":"height","name":"height","type":"INT","widget":{"name":"height"},"link":null},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"keep_proportion","name":"keep_proportion","type":"COMBO","widget":{"name":"keep_proportion"},"link":null},{"localized_name":"pad_color","name":"pad_color","type":"STRING","widget":{"name":"pad_color"},"link":null},{"localized_name":"crop_position","name":"crop_position","type":"COMBO","widget":{"name":"crop_position"},"link":null},{"localized_name":"divisible_by","name":"divisible_by","type":"INT","widget":{"name":"divisible_by"},"link":null},{"localized_name":"device","name":"device","shape":7,"type":"COMBO","widget":{"name":"device"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[71]},{"localized_name":"width","name":"width","type":"INT","links":null},{"localized_name":"height","name":"height","type":"INT","links":null},{"localized_name":"mask","name":"mask","type":"MASK","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"1.1.3","Node name for S&R":"ImageResizeKJv2"},"widgets_values":[1280,720,"lanczos","resize","0, 0, 0","center",2,"cpu"]},{"id":58,"type":"ImageScaleBy","pos":[1392.2479248046875,-277.10394287109375],"size":[270,82],"flags":{},"order":21,"mode":4,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":69},{"localized_name":"upscale_method","name":"upscale_method","type":"COMBO","widget":{"name":"upscale_method"},"link":null},{"localized_name":"scale_by","name":"scale_by","type":"FLOAT","widget":{"name":"scale_by"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"ImageScaleBy"},"widgets_values":["nearest-exact",0.25]},{"id":9,"type":"ImageBatchPath","pos":[880,200],"size":[400,200],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"image_dir","name":"image_dir","type":"STRING","widget":{"name":"image_dir"},"link":55},{"localized_name":"batch_size","name":"batch_size","shape":7,"type":"INT","widget":{"name":"batch_size"},"link":74},{"localized_name":"start_from","name":"start_from","shape":7,"type":"INT","widget":{"name":"start_from"},"link":null},{"localized_name":"sort_method","name":"sort_method","shape":7,"type":"COMBO","widget":{"name":"sort_method"},"link":null}],"outputs":[{"localized_name":"image_path","name":"IMAGE_PATH","shape":6,"type":"STRING","links":[66]},{"localized_name":"IMAGE","name":"IMAGE","shape":6,"type":"IMAGE","links":[26,37]}],"properties":{"cnr_id":"comfyui-joycaption","ver":"1.1.1","Node name for S&R":"ImageBatchPath","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["/workspace/ComfyUI/input/red_head_lady_v1",3,1,"sequential"]},{"id":37,"type":"GetNode","pos":[1924.63037109375,88.93521881103516],"size":[210,60],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[49]}],"title":"Get_Results_folder","properties":{},"widgets_values":["Results_folder"],"color":"#223","bgcolor":"#335"},{"id":8,"type":"CaptionSaver","pos":[2185.002197265625,171.06488037109375],"size":[400,200],"flags":{},"order":25,"mode":0,"inputs":[{"localized_name":"string","name":"string","type":"STRING","link":64},{"localized_name":"image_path","name":"image_path","type":"STRING","link":66},{"localized_name":"image","name":"image","shape":7,"type":"IMAGE","link":47},{"localized_name":"custom_output_path","name":"custom_output_path","shape":7,"type":"STRING","widget":{"name":"custom_output_path"},"link":49},{"localized_name":"custom_file_name","name":"custom_file_name","shape":7,"type":"STRING","widget":{"name":"custom_file_name"},"link":68},{"localized_name":"overwrite","name":"overwrite","shape":7,"type":"BOOLEAN","widget":{"name":"overwrite"},"link":null}],"outputs":[],"properties":{"cnr_id":"comfyui-joycaption","ver":"1.1.1","Node name for S&R":"CaptionSaver","enableTabs":false,"tabWidth":65,"tabXOffset":10,"hasSecondTab":false,"secondTabText":"Send Back","secondTabOffset":80,"secondTabWidth":65,"widget_ue_connectable":{}},"widgets_values":["/workspace/ComfyUI/input/Ona_model_resized","",false]},{"id":22,"type":"ImpactImageBatchToImageList","pos":[1917.4080810546875,-143.19439697265625],"size":[202.54061889648438,26],"flags":{},"order":23,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":71}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","shape":6,"type":"IMAGE","links":[47]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.22.0","Node name for S&R":"ImpactImageBatchToImageList"},"widgets_values":[]},{"id":55,"type":"PrimitiveString","pos":[596.5427856445312,-587.149658203125],"size":[369.1735534667969,58],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"STRING","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[67]}],"title":"Charachter / Result filename prefix","properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveString"},"widgets_values":["Ona_model"]},{"id":56,"type":"SetNode","pos":[1156.55517578125,-587.0696411132812],"size":[210,58],"flags":{},"order":13,"mode":0,"inputs":[{"name":"STRING","type":"STRING","link":67}],"outputs":[{"name":"*","type":"*","links":null}],"title":"Set_Character","properties":{"previousName":"Character"},"widgets_values":["Character"],"color":"#323","bgcolor":"#535"},{"id":57,"type":"GetNode","pos":[2202.03857421875,63.93999481201172],"size":[210,60],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[68]}],"title":"Get_Character","properties":{},"widgets_values":["Character"],"color":"#323","bgcolor":"#535"},{"id":60,"type":"PrimitiveInt","pos":[689.6690063476562,-482.39794921875],"size":[270,82],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"value","name":"value","type":"INT","widget":{"name":"value"},"link":null}],"outputs":[{"localized_name":"INT","name":"INT","type":"INT","links":[72]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PrimitiveInt"},"widgets_values":[0,"fixed"]},{"id":65,"type":"Note","pos":[365.8946533203125,-478.80206298828125],"size":[303.9669189453125,88],"flags":{},"order":9,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Use 0 to process all images\nTo test, use 2 or 3 images first"],"color":"#432","bgcolor":"#653"},{"id":12,"type":"PreviewAny","pos":[1746.191162109375,298.41351318359375],"size":[392.45770263671875,325.3406066894531],"flags":{},"order":24,"mode":0,"inputs":[{"localized_name":"source","name":"source","type":"*","link":79}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.49","Node name for S&R":"PreviewAny"},"widgets_values":[]},{"id":26,"type":"StringListToString","pos":[1782.96435546875,673.9840698242188],"size":[270,58],"flags":{"collapsed":true},"order":22,"mode":0,"inputs":[{"localized_name":"string_list","name":"string_list","type":"STRING","link":34},{"localized_name":"join_with","name":"join_with","type":"STRING","widget":{"name":"join_with"},"link":null}],"outputs":[{"localized_name":"STRING","name":"STRING","type":"STRING","links":[79]}],"properties":{"cnr_id":"comfyui-impact-pack","ver":"8.22.0","Node name for S&R":"StringListToString"},"widgets_values":["\\n"]},{"id":64,"type":"GetNode","pos":[650.2505493164062,1129.8797607421875],"size":[210,58],"flags":{},"order":7,"mode":0,"inputs":[],"outputs":[{"name":"STRING","type":"STRING","links":[80]}],"title":"Get_Character","properties":{},"widgets_values":["Character"],"color":"#323","bgcolor":"#535"}],"links":[[15,13,0,3,1,"JOYCAPTION_EXTRA_OPTIONS"],[26,9,1,23,0,"IMAGE"],[27,23,0,14,0,"IMAGE"],[34,3,1,26,0,"STRING"],[37,9,1,3,0,"IMAGE"],[47,22,0,8,2,"IMAGE"],[49,37,0,8,3,"STRING"],[50,36,0,38,1,"STRING"],[51,38,0,35,0,"STRING"],[52,39,0,40,1,"STRING"],[53,40,0,41,0,"*"],[55,44,0,9,0,"STRING"],[64,3,1,8,0,"STRING"],[66,9,0,8,1,"STRING"],[67,55,0,56,0,"*"],[68,57,0,8,4,"STRING"],[69,23,0,58,0,"IMAGE"],[71,14,0,22,0,"IMAGE"],[72,60,0,59,0,"*"],[74,61,0,9,1,"INT"],[79,26,0,12,0,"*"],[80,64,0,13,27,"STRING"]],"groups":[{"id":1,"title":"Settings","bounding":[586.155517578125,-865.4561157226562,794.2720336914062,480.93853759765625],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":1.2100000000000002,"offset":[-422.2797475162789,-809.8873998450408]},"frontendVersion":"1.19.9","ue_links":[],"links_added_by_ue":[],"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4}