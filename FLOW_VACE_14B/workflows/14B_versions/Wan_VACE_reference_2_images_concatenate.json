{
  "id": "3aa9b69a-a189-4ecb-b4ac-a2d2cf67e6e6",
  "revision": 0,
  "last_node_id": 282,
  "last_link_id": 584,
  "nodes": [
    {
      "id": 38,
      "type": "CLIPLoader",
      "pos": [
        -192.55772399902344,
        367.7666015625
      ],
      "size": [
        350,
        106
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "slot_index": 0,
          "links": [
            74,
            75
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "CLIPLoader",
        "models": [
          {
            "name": "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
            "url": "https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors?download=true",
            "directory": "text_encoders"
          }
        ]
      },
      "widgets_values": [
        "umt5_xxl_fp8_e4m3fn_scaled.safetensors",
        "wan",
        "default"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 231,
      "type": "Reroute",
      "pos": [
        423.4662170410156,
        1082.3818359375
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 23,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 503
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "VAE",
          "links": [
            504
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 232,
      "type": "Reroute",
      "pos": [
        1266.558837890625,
        1086.553466796875
      ],
      "size": [
        75,
        26
      ],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "",
          "type": "*",
          "link": 504
        }
      ],
      "outputs": [
        {
          "name": "",
          "type": "VAE",
          "links": [
            508
          ]
        }
      ],
      "properties": {
        "showOutputText": false,
        "horizontal": false
      }
    },
    {
      "id": 98,
      "type": "TorchCompileModelWanVideo",
      "pos": [
        250.5984344482422,
        60.85517120361328
      ],
      "size": [
        287.2547607421875,
        178
      ],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 550
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            203
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "086ac449a21e9f5e3b970313c2287713b67e8b95",
        "Node name for S&R": "TorchCompileModelWanVideo",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        "inductor",
        false,
        "default",
        false,
        128,
        true
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 65,
      "type": "SkipLayerGuidanceDiT",
      "pos": [
        599.1133422851562,
        60.85517120361328
      ],
      "size": [
        230,
        180
      ],
      "flags": {
        "collapsed": false
      },
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 203
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            132
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "SkipLayerGuidanceDiT",
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65
      },
      "widgets_values": [
        "9,10",
        "9,10",
        3,
        0.01,
        0.8000000000000002,
        0
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 67,
      "type": "ModelSamplingSD3",
      "pos": [
        873.5341186523438,
        60.85517120361328
      ],
      "size": [
        240,
        60
      ],
      "flags": {
        "collapsed": false
      },
      "order": 37,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 132
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            133
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.26",
        "Node name for S&R": "ModelSamplingSD3",
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65
      },
      "widgets_values": [
        5.000000000000001
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 68,
      "type": "UNetTemporalAttentionMultiply",
      "pos": [
        873.5341186523438,
        183.83407592773438
      ],
      "size": [
        243.60000610351562,
        150
      ],
      "flags": {
        "collapsed": false
      },
      "order": 40,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 133
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            131
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "UNetTemporalAttentionMultiply",
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65
      },
      "widgets_values": [
        1,
        1,
        1.2,
        1.3
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 66,
      "type": "CFGZeroStar",
      "pos": [
        873.5341186523438,
        404.0234680175781
      ],
      "size": [
        230,
        30
      ],
      "flags": {
        "collapsed": false
      },
      "order": 42,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 131
        }
      ],
      "outputs": [
        {
          "name": "patched_model",
          "type": "MODEL",
          "links": [
            135
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.27",
        "Node name for S&R": "CFGZeroStar",
        "enableTabs": false,
        "tabWidth": 65,
        "tabXOffset": 10,
        "hasSecondTab": false,
        "secondTabText": "Send Back",
        "secondTabOffset": 80,
        "secondTabWidth": 65
      },
      "widgets_values": [],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 248,
      "type": "Florence2Run",
      "pos": [
        -1045.0633544921875,
        -440.0706481933594
      ],
      "size": [
        400,
        364
      ],
      "flags": {},
      "order": 22,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 575
        },
        {
          "name": "florence2_model",
          "type": "FL2MODEL",
          "link": 537
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": []
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": []
        },
        {
          "name": "caption",
          "type": "STRING",
          "links": [
            539
          ]
        },
        {
          "name": "data",
          "type": "JSON",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-florence2",
        "ver": "1.0.3",
        "Node name for S&R": "Florence2Run",
        "aux_id": "kijai/ComfyUI-Florence2"
      },
      "widgets_values": [
        "",
        "more_detailed_caption",
        true,
        false,
        1024,
        3,
        true,
        "",
        171387639123261,
        "fixed"
      ]
    },
    {
      "id": 8,
      "type": "VAEDecode",
      "pos": [
        1376.869140625,
        944.7604370117188
      ],
      "size": [
        160.1603546142578,
        46
      ],
      "flags": {
        "collapsed": false
      },
      "order": 46,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 35
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 508
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            507
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "VAEDecode"
      },
      "widgets_values": []
    },
    {
      "id": 116,
      "type": "VHS_SplitImages",
      "pos": [
        1384.3094482421875,
        1043.6912841796875
      ],
      "size": [
        210,
        118
      ],
      "flags": {},
      "order": 47,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 507
        }
      ],
      "outputs": [
        {
          "name": "IMAGE_A",
          "type": "IMAGE",
          "links": []
        },
        {
          "name": "A_count",
          "type": "INT",
          "links": null
        },
        {
          "name": "IMAGE_B",
          "type": "IMAGE",
          "links": [
            512
          ]
        },
        {
          "name": "B_count",
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "598e181e97d50174cc18677dfcdaa7b9b6ec0cb2",
        "Node name for S&R": "VHS_SplitImages",
        "aux_id": "Kosinkadink/ComfyUI-VideoHelperSuite"
      },
      "widgets_values": {
        "split_index": 8
      }
    },
    {
      "id": 253,
      "type": "Note",
      "pos": [
        -914.0357055664062,
        448.11102294921875
      ],
      "size": [
        210,
        88
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Change padding adjusting dimensions to fit size of video frames (832,480). \nE.g. (padding L/R = (832-400)/2)"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 254,
      "type": "SetNode",
      "pos": [
        -1525.8515625,
        199.37063598632812
      ],
      "size": [
        210,
        60
      ],
      "flags": {
        "collapsed": true
      },
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 548
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_Loaded_image_1",
      "properties": {
        "previousName": "Loaded_image_1"
      },
      "widgets_values": [
        "Loaded_image_1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 198,
      "type": "PreviewImage",
      "pos": [
        -1293.928466796875,
        62.352638244628906
      ],
      "size": [
        210,
        258
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 440
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.31",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 268,
      "type": "SetNode",
      "pos": [
        -1554.035888671875,
        757.375244140625
      ],
      "size": [
        210,
        58
      ],
      "flags": {
        "collapsed": true
      },
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 560
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_Loaded_image_2",
      "properties": {
        "previousName": "Loaded_image_2"
      },
      "widgets_values": [
        "Loaded_image_2"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 267,
      "type": "PreviewImage",
      "pos": [
        -1234.7125244140625,
        1066.263916015625
      ],
      "size": [
        210,
        258
      ],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 559
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.31",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 228,
      "type": "SetNode",
      "pos": [
        -601.6016845703125,
        378.38214111328125
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 43,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 568
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            569
          ]
        }
      ],
      "title": "Set_reference image",
      "properties": {
        "previousName": "reference image"
      },
      "widgets_values": [
        "reference image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 251,
      "type": "PreviewImage",
      "pos": [
        -935.6575317382812,
        110.39512634277344
      ],
      "size": [
        329.2051696777344,
        258
      ],
      "flags": {},
      "order": 45,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 569
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "PreviewImage"
      },
      "widgets_values": []
    },
    {
      "id": 244,
      "type": "DownloadAndLoadFlorence2Model",
      "pos": [
        -1338.510498046875,
        -195.0938720703125
      ],
      "size": [
        271.34283447265625,
        106
      ],
      "flags": {},
      "order": 2,
      "mode": 4,
      "inputs": [
        {
          "name": "lora",
          "shape": 7,
          "type": "PEFTLORA",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "florence2_model",
          "type": "FL2MODEL",
          "links": [
            537
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-florence2",
        "ver": "1.0.3",
        "Node name for S&R": "DownloadAndLoadFlorence2Model",
        "aux_id": "kijai/ComfyUI-Florence2"
      },
      "widgets_values": [
        "microsoft/Florence-2-large",
        "fp16",
        "sdpa"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 276,
      "type": "GetNode",
      "pos": [
        -1342.626708984375,
        -315.96630859375
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 3,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": []
        }
      ],
      "title": "Get_Loaded_image_2",
      "properties": {},
      "widgets_values": [
        "Loaded_image_2"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 249,
      "type": "PreviewAny",
      "pos": [
        -634.6932373046875,
        -285.89373779296875
      ],
      "size": [
        379.376708984375,
        192.4468994140625
      ],
      "flags": {},
      "order": 30,
      "mode": 4,
      "inputs": [
        {
          "name": "source",
          "type": "*",
          "link": 539
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "PreviewAny"
      },
      "widgets_values": []
    },
    {
      "id": 79,
      "type": "VHS_VideoCombine",
      "pos": [
        1569.24462890625,
        270.3512878417969
      ],
      "size": [
        531.6265869140625,
        643.169189453125
      ],
      "flags": {},
      "order": 49,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 513
        },
        {
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "Filenames",
          "type": "VHS_FILENAMES",
          "links": null
        }
      ],
      "title": "Video",
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "598e181e97d50174cc18677dfcdaa7b9b6ec0cb2",
        "Node name for S&R": "VHS_VideoCombine",
        "aux_id": "Kosinkadink/ComfyUI-VideoHelperSuite"
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "VACE_2_reference_images",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": true,
        "videopreview": {
          "hidden": false,
          "paused": false,
          "params": {
            "filename": "VACE_2_reference_images_00054.mp4",
            "subfolder": "",
            "type": "output",
            "format": "video/h264-mp4",
            "frame_rate": 16,
            "workflow": "VACE_2_reference_images_00054.png",
            "fullpath": "/workspace/ComfyUI/output/VACE_2_reference_images_00054.mp4"
          }
        }
      }
    },
    {
      "id": 262,
      "type": "Note",
      "pos": [
        976.1725463867188,
        958.7256469726562
      ],
      "size": [
        215.6148681640625,
        90.57954406738281
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Set at 85 frames: first 4 'extra', blend ref. image and scene, next 4 are not good. So we end up in 81 frames for the final video"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 255,
      "type": "GetNode",
      "pos": [
        -1348.2882080078125,
        -435.87908935546875
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 5,
      "mode": 4,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            575
          ]
        }
      ],
      "title": "Get_Loaded_image_1",
      "properties": {},
      "widgets_values": [
        "Loaded_image_1"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 256,
      "type": "Note",
      "pos": [
        -609.6922607421875,
        -438.9176940917969
      ],
      "size": [
        267.0615539550781,
        100.38390350341797
      ],
      "flags": {},
      "order": 6,
      "mode": 4,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Activate and use Florence caption o get a description/caption of the images. You can later adapt and use in the positive prompt.\nBypass if not needed.\nConnect either the first or second image."
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 229,
      "type": "GetNode",
      "pos": [
        666.9815063476562,
        948.6478881835938
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            496
          ]
        }
      ],
      "title": "Get_reference image",
      "properties": {},
      "widgets_values": [
        "reference image"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 39,
      "type": "VAELoader",
      "pos": [
        22.65697479248047,
        868.316162109375
      ],
      "size": [
        350,
        60
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "slot_index": 0,
          "links": [
            174,
            503
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "VAELoader",
        "models": [
          {
            "name": "wan_2.1_vae.safetensors",
            "url": "https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors?download=true",
            "directory": "vae"
          }
        ]
      },
      "widgets_values": [
        "wan_2.1_vae.safetensors"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 7,
      "type": "CLIPTextEncode",
      "pos": [
        182.69068908691406,
        671.30810546875
      ],
      "size": [
        420,
        130
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 75
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            175
          ]
        }
      ],
      "title": "CLIP Text Encode (Negative Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "bright colors, overexposed, static, blurred details, subtitles, style, artwork, painting, picture, still, overall gray, worst quality, low quality, JPEG compression residue, ugly, incomplete, extra fingers, poorly drawn hands, poorly drawn faces, deformed, disfigured, malformed limbs, fused fingers, still picture, cluttered background, three legs, many people in the background, walking backwards, bad face"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 278,
      "type": "Note",
      "pos": [
        625.226806640625,
        328.7966003417969
      ],
      "size": [
        217.2772674560547,
        308.36688232421875
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "For 2 images, I like to use 3 paragraphs:\n\n1: general (short) description of the scene, which describes how the 2 images relate to each other \n\n2: object 1, description (how it looks like) and action (what is doing). Sometimes, how it relates to camera/position (does not work very often).\n\n3: object 2, description, optionally actions (for more or less 'static' backgrounds, better to provide a better description')\n\n\nWhile a good decription is important, too much text will confuse the model!"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 125,
      "type": "Note",
      "pos": [
        1203.16357421875,
        268.80914306640625
      ],
      "size": [
        341.9234619140625,
        156.95932006835938
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "For 'reference' movement is still difficult to control and seed has a lot of influence.\n\nUse 12-20 steps for testing. If quality is not enough, increase to 40-50.\n\nUse cfg between 1.5 (more creative) and 6 (closer to ref. image)"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 233,
      "type": "SetNode",
      "pos": [
        1642.370361328125,
        1009.8582763671875
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 48,
      "mode": 0,
      "inputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "link": 512
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            513
          ]
        }
      ],
      "title": "Set_Final video",
      "properties": {
        "previousName": "Final video"
      },
      "widgets_values": [
        "Final video"
      ],
      "color": "#2a363b",
      "bgcolor": "#3f5159"
    },
    {
      "id": 279,
      "type": "ImageResizeKJv2",
      "pos": [
        -1896.110595703125,
        437.49468994140625
      ],
      "size": [
        270,
        242
      ],
      "flags": {},
      "order": 28,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 576
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            577
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": null
        },
        {
          "name": "height",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "ImageResizeKJv2",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        512,
        512,
        "lanczos",
        "resize",
        "0, 0, 0",
        "center",
        2
      ]
    },
    {
      "id": 6,
      "type": "CLIPTextEncode",
      "pos": [
        205.96444702148438,
        305.6435852050781
      ],
      "size": [
        380.80682373046875,
        278.478515625
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 74
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            176
          ]
        }
      ],
      "title": "CLIP Text Encode (Positive Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "CLIPTextEncode"
      },
      "widgets_values": [
        "Videoshot of a young woman walking on a busy street in New York City.\n\nShe is wearing a futuristic-looking outfit. The woman has a serious expression on her face and is looking off to the side. Initial position is on the left, then she moves to the right in a natural way.\n\nThe background is a street lined with tall buildings on both sides, with shops and restaurants visible on the left and right sides. In the back, there is a tall skyscraper with a unique design, similar to the Empire State Building. The sky is blue and the sun is shining brightly."
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 265,
      "type": "LoadImage",
      "pos": [
        -1946.0142822265625,
        726.1324462890625
      ],
      "size": [
        342.5999755859375,
        314.0000305175781
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            560,
            570
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "XTYARK2DADKN4NK8PGAZMSGVN0.jfif",
        "image"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 243,
      "type": "Note",
      "pos": [
        -1527.640625,
        53.7071647644043
      ],
      "size": [
        210,
        88
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Change seeting image crop to adjust image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 280,
      "type": "Note",
      "pos": [
        -1558.4248046875,
        867.8132934570312
      ],
      "size": [
        210,
        88
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Change seeting image crop to adjust image"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 281,
      "type": "Note",
      "pos": [
        -1540.3035888671875,
        1206.7587890625
      ],
      "size": [
        210,
        88
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "Resize if needed.\n\nCrop and resizing may need to be bypassed"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 257,
      "type": "UNETLoader",
      "pos": [
        -179.11038208007812,
        76.26591491699219
      ],
      "size": [
        385.5919189453125,
        82
      ],
      "flags": {},
      "order": 15,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            550
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.32",
        "Node name for S&R": "UNETLoader"
      },
      "widgets_values": [
        "wan2.1_vace_14B_fp16.safetensors",
        "default"
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 282,
      "type": "Note",
      "pos": [
        -133.90736389160156,
        201.0434112548828
      ],
      "size": [
        229.4757537841797,
        88
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {},
      "widgets_values": [
        "CausVid does not seem to work nicely with concatenatig images. See the composite workflow"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 123,
      "type": "LoadImage",
      "pos": [
        -1952.6845703125,
        77.30567169189453
      ],
      "size": [
        342.5999755859375,
        314.0000305175781
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            548,
            576
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "LoadImage"
      },
      "widgets_values": [
        "PD1452MZ0A5S5CJ3RNREQ06B10.jfif",
        "image"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 272,
      "type": "INTConstant",
      "pos": [
        -1574.7900390625,
        616.0641479492188
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            562,
            564
          ]
        }
      ],
      "title": "Height",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "INTConstant",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        720
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 86,
      "type": "WanVaceToVideo",
      "pos": [
        910.1614379882812,
        667.69384765625
      ],
      "size": [
        322.2492980957031,
        254
      ],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 176
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 175
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 174
        },
        {
          "name": "control_video",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        },
        {
          "name": "control_masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "reference_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 496
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            332
          ]
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [
            333
          ]
        },
        {
          "name": "latent",
          "type": "LATENT",
          "links": [
            334
          ]
        },
        {
          "name": "trim_latent",
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "WanVaceToVideo"
      },
      "widgets_values": [
        832,
        480,
        85,
        1,
        1.0000000000000002
      ]
    },
    {
      "id": 266,
      "type": "ImageCrop",
      "pos": [
        -1567.9755859375,
        1006.676025390625
      ],
      "size": [
        210,
        130
      ],
      "flags": {},
      "order": 32,
      "mode": 4,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 571
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            559,
            583
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.31",
        "Node name for S&R": "ImageCrop"
      },
      "widgets_values": [
        1856,
        1280,
        0,
        0
      ]
    },
    {
      "id": 250,
      "type": "ImagePadKJ",
      "pos": [
        -1297.1695556640625,
        373.54620361328125
      ],
      "size": [
        270,
        262
      ],
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 541
        },
        {
          "name": "mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "target_width",
          "shape": 7,
          "type": "INT",
          "link": 561
        },
        {
          "name": "target_height",
          "shape": 7,
          "type": "INT",
          "link": 562
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            582
          ]
        },
        {
          "name": "masks",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "ImagePadKJ",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        0,
        0,
        0,
        0,
        0,
        "color",
        "255,255,255"
      ]
    },
    {
      "id": 270,
      "type": "ImageConcanate",
      "pos": [
        -884.9662475585938,
        588.672119140625
      ],
      "size": [
        270,
        102
      ],
      "flags": {},
      "order": 41,
      "mode": 0,
      "inputs": [
        {
          "name": "image1",
          "type": "IMAGE",
          "link": 582
        },
        {
          "name": "image2",
          "type": "IMAGE",
          "link": 584
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            568
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "ImageConcanate",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        "right",
        true
      ]
    },
    {
      "id": 274,
      "type": "ImagePadKJ",
      "pos": [
        -1287.4854736328125,
        722.7061157226562
      ],
      "size": [
        270,
        262
      ],
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 583
        },
        {
          "name": "mask",
          "shape": 7,
          "type": "MASK",
          "link": null
        },
        {
          "name": "target_width",
          "shape": 7,
          "type": "INT",
          "link": 563
        },
        {
          "name": "target_height",
          "shape": 7,
          "type": "INT",
          "link": 564
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            584
          ]
        },
        {
          "name": "masks",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "ImagePadKJ",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        0,
        0,
        0,
        0,
        0,
        "color",
        "255,255,255"
      ]
    },
    {
      "id": 273,
      "type": "INTConstant",
      "pos": [
        -1573.593017578125,
        478.0880432128906
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "value",
          "type": "INT",
          "links": [
            561,
            563
          ]
        }
      ],
      "title": "Width",
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "INTConstant",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        640
      ],
      "color": "#1b4669",
      "bgcolor": "#29699c"
    },
    {
      "id": 275,
      "type": "ImageResizeKJv2",
      "pos": [
        -1884.316162109375,
        1085.657470703125
      ],
      "size": [
        270,
        242
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 570
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            571
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": null
        },
        {
          "name": "height",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "bec42252c690c1b5b2064b5a6732ad11cc452759",
        "Node name for S&R": "ImageResizeKJv2",
        "aux_id": "kijai/ComfyUI-KJNodes"
      },
      "widgets_values": [
        640,
        640,
        "lanczos",
        "resize",
        "0, 0, 0",
        "center",
        2
      ]
    },
    {
      "id": 196,
      "type": "ImageCrop",
      "pos": [
        -1544.0361328125,
        258.11102294921875
      ],
      "size": [
        210,
        130
      ],
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 577
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            440,
            541
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.31",
        "Node name for S&R": "ImageCrop"
      },
      "widgets_values": [
        603,
        720,
        200,
        0
      ]
    },
    {
      "id": 3,
      "type": "KSampler",
      "pos": [
        1268.9969482421875,
        480.9498291015625
      ],
      "size": [
        280,
        423.1697998046875
      ],
      "flags": {},
      "order": 44,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 135
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 332
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 333
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 334
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "slot_index": 0,
          "links": [
            35
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.29",
        "Node name for S&R": "KSampler"
      },
      "widgets_values": [
        410165367022790,
        "fixed",
        20,
        4,
        "euler",
        "beta",
        1
      ]
    }
  ],
  "links": [
    [
      35,
      3,
      0,
      8,
      0,
      "LATENT"
    ],
    [
      74,
      38,
      0,
      6,
      0,
      "CLIP"
    ],
    [
      75,
      38,
      0,
      7,
      0,
      "CLIP"
    ],
    [
      131,
      68,
      0,
      66,
      0,
      "MODEL"
    ],
    [
      132,
      65,
      0,
      67,
      0,
      "MODEL"
    ],
    [
      133,
      67,
      0,
      68,
      0,
      "MODEL"
    ],
    [
      135,
      66,
      0,
      3,
      0,
      "MODEL"
    ],
    [
      174,
      39,
      0,
      86,
      2,
      "VAE"
    ],
    [
      175,
      7,
      0,
      86,
      1,
      "CONDITIONING"
    ],
    [
      176,
      6,
      0,
      86,
      0,
      "CONDITIONING"
    ],
    [
      203,
      98,
      0,
      65,
      0,
      "MODEL"
    ],
    [
      332,
      86,
      0,
      3,
      1,
      "CONDITIONING"
    ],
    [
      333,
      86,
      1,
      3,
      2,
      "CONDITIONING"
    ],
    [
      334,
      86,
      2,
      3,
      3,
      "LATENT"
    ],
    [
      440,
      196,
      0,
      198,
      0,
      "IMAGE"
    ],
    [
      496,
      229,
      0,
      86,
      5,
      "IMAGE"
    ],
    [
      503,
      39,
      0,
      231,
      0,
      "*"
    ],
    [
      504,
      231,
      0,
      232,
      0,
      "*"
    ],
    [
      507,
      8,
      0,
      116,
      0,
      "IMAGE"
    ],
    [
      508,
      232,
      0,
      8,
      1,
      "VAE"
    ],
    [
      512,
      116,
      2,
      233,
      0,
      "*"
    ],
    [
      513,
      233,
      0,
      79,
      0,
      "IMAGE"
    ],
    [
      537,
      244,
      0,
      248,
      1,
      "FL2MODEL"
    ],
    [
      539,
      248,
      2,
      249,
      0,
      "*"
    ],
    [
      541,
      196,
      0,
      250,
      0,
      "IMAGE"
    ],
    [
      548,
      123,
      0,
      254,
      0,
      "*"
    ],
    [
      550,
      257,
      0,
      98,
      0,
      "MODEL"
    ],
    [
      559,
      266,
      0,
      267,
      0,
      "IMAGE"
    ],
    [
      560,
      265,
      0,
      268,
      0,
      "*"
    ],
    [
      561,
      273,
      0,
      250,
      2,
      "INT"
    ],
    [
      562,
      272,
      0,
      250,
      3,
      "INT"
    ],
    [
      563,
      273,
      0,
      274,
      2,
      "INT"
    ],
    [
      564,
      272,
      0,
      274,
      3,
      "INT"
    ],
    [
      568,
      270,
      0,
      228,
      0,
      "IMAGE"
    ],
    [
      569,
      228,
      0,
      251,
      0,
      "IMAGE"
    ],
    [
      570,
      265,
      0,
      275,
      0,
      "IMAGE"
    ],
    [
      571,
      275,
      0,
      266,
      0,
      "IMAGE"
    ],
    [
      575,
      255,
      0,
      248,
      0,
      "IMAGE"
    ],
    [
      576,
      123,
      0,
      279,
      0,
      "IMAGE"
    ],
    [
      577,
      279,
      0,
      196,
      0,
      "IMAGE"
    ],
    [
      582,
      250,
      0,
      270,
      0,
      "IMAGE"
    ],
    [
      583,
      266,
      0,
      274,
      0,
      "IMAGE"
    ],
    [
      584,
      274,
      0,
      270,
      1,
      "IMAGE"
    ]
  ],
  "groups": [
    {
      "id": 2,
      "title": "Ref Images",
      "bounding": [
        -1977.041015625,
        -12.189146995544434,
        1722.580810546875,
        1351.9061279296875
      ],
      "color": "#8AA",
      "font_size": 24,
      "flags": {
        "pinned": true
      }
    },
    {
      "id": 18,
      "title": "Video Rendering",
      "bounding": [
        -212.55772399902344,
        -17.850358963012695,
        2323.4287109375,
        1189.541748046875
      ],
      "color": "#88A",
      "font_size": 24,
      "flags": {
        "pinned": true
      }
    },
    {
      "id": 19,
      "title": "[OPTIONAL] - Image description",
      "bounding": [
        -1360.2977294921875,
        -513.6708374023438,
        1124.83056640625,
        447.6000061035156
      ],
      "color": "#444",
      "font_size": 24,
      "flags": {
        "pinned": true
      }
    }
  ],
  "config": {},
  "extra": {
    "ds": {
      "scale": 0.3558410273837261,
      "offset": [
        1883.3503353755775,
        772.6871510032747
      ]
    },
    "frontendVersion": "1.19.9",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true,
    "groupNodes": {}
  },
  "version": 0.4
}